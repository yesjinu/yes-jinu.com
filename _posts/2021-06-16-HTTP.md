---
layout: post
title: "HTTP 리퀘스트"
subtitle: "인터넷 통신을 구성하는 규약"
date: 2021-06-16 21:05:00 +0900
background: '../../../img/posts/internet.jpg'
---
# HTTP requests

브라우저와 인터넷는 어떻게 통신할까

```ruby
def foo
  puts 'foo'
end
```


## Background

당신이 지금 보고 있는 이 페이지는 HTML, CSS, 그리고 Javascript로 이루어져 있습니다. github에게서 인터넷을 통해 보내지고 있지요. 인터넷은 서로 다른 서버들이 호스팅하는 수많은 리소스들로 구성되어 있습니다. 여기에서 '리소스'라 함은, HTML 파일이나, 스타일시트, 이미지, 비디오, 스크립트 등 웹 상의 모든 요소를 말합니다. 인터넷을 통해 리소스에 접근하기 위해서는, 브라우저가 서버에게 리소스를 요청하고 응답으로 받은 리소스를 보여줄 수 있어야 합니다. 이러한 요청과 응답에 대한 규약(프로토콜)이 당신으로 하여금 당신의 브라우저에서 이 페이지를 볼 수 있게 합니다.

이 아티클은 인터넷 동작의 가장 기초에 해당하는 HTTP에 대해서 다룰 것입니다.

## What is HTTP?

HTTP는 Hypertext Transfer Protocol의 약자로, 인터넷 상의 요청(request)과 응답(response)를 구조화하는 데에 사용됩니다. HTTP는 네트워크의 한 쪽에서 다른 한 쪽으로 옮겨질 데이터를 필요로 합니다.

리소스는 TCP(Transmission Control Protocol)을 통해 전달됩니다. 당신이 이 웹페이지를 보기 위해서는, TCP가 브라우저와 github 서버 사이의 채널을 관리하고 있어야 합니다. TCP는 디바이스 간 데이터를 전송할 때에 인터넷 커넥션을 관리하는 데에 사용됩니다. HTTP는 커넥션 관계의 두 디바이스가 지켜야 하는 약속입니다.

## HTTP & TCP: How it works

브라우저 주소창에 어떤 웹사이트의 주소를 타이핑하는 것은, 브라우저에게 '이 URL에 해당하는 서버와 TCP 채널을 열어라'고 명령하는 것과 같습니다. 이런 상황에서, 리퀘스트를 보내는 당신의 컴퓨터는 클라이언트, 받는 주소(URL)는 서버에 해당하는 것이죠.

TCP 커넥션이 열리면, 클라이언트(브라우저)는 웹페이지에 대한 정보를 HTTP GET 리퀘스트에 담아 서버에게 보냅니다. 서버가 응답을 보내면, TCP 커넥션은 닫힙니다. TCP 커넥션은 브라우저가 리퀘스트를 보낼 때마다 새로 열립니다. GET 리퀘스트는 클라이언트가 호출할 수 있는 HTTP 메소드의 한 종류입니다. (POST, PUT, DELETE와 같은 다른 메소드들은 REST API를 다룰 때 다시 살펴보도록 합시다)

GET 리퀘스트를 사용해 클라이언트가 웹의 리소스에 액세스하는 방법에 대한 예시를 들어볼게요.

---

http://google.com에서 접속하려 합니다. 브라우저에 URL을 입력하면 브라우저는 http 부분을 인식해 HTTP 프로토콜임을 인식합니다. 그런 다음 URL에서 도메인 이름(google.com)을 가져와 DNS에 IP 주소를 요청합니다.이제 클라이언트는 구글에 접속하기 위한 IP 주소를 알고 있습니다. 그런 다음 지정된 대로 HTTP 프로토콜을 사용하여 해당 주소의 서버에 대한 커넥션을 엽니다. 브라우저는 서버의 IP 주소가 포함된 GET 리퀘스트를 전송합니다. GET 리퀘스트에는 다음 텍스트가 포함되어 있습니다.

{% highlight shell %}
GET / HTTP/1.1
Host: www.google.com
{% endhighlight %}

첫 번째 라인은 "www.google.com"에서의 경로(이 경우 "/")와 프로토콜 HTTP/1.1을 담고 있습니다. (HTTP/1.1은 현재 HTTP/1.0으로 불리는 첫 번째 HTTP의 개정판입니다) HTTP/1.0에서는 리소스 요청마다 매번 새롭게 연결을 요청해야 합니다. HTTP/1.1은 두 번 이상의 연결을 사용하므로 페이지에 대한 리소스를 한 번 전송한 이후에도 추가적인 연결 없이 리소스를 전송할 수 있습니다. 결과적으로, HTTP/1.1을 사용하는 요청은 HTTP/1.0을 사용하는 요청보다 지연이 적지요.

두 번째 라인은 "www.google.com"인 서버의 주소를 포함합니다. 브라우저가 전송하도록 선택한 데이터에 따라 추가 라인이 있을 수 있습니다.

---

서버가 요청된 경로를 찾았다면, 서버는 다음과 같은 응답을 보냅니다.

{% highlight shell %}
HTTP/1.1 200 OK
Content-Type: text/html
{% endhighlight %}

이 헤더 이후에는 요청된 콘텐츠가 이어지고, 이 경우 [www.google.com](http://www.google.com) 웹사이트를 렌더링하는 데 필요한 정보입니다.

헤더의 첫 번째 라인인 HTTP/1.1 200 OK는 클라이언트가 통신하고자 하는 프로토콜(HTTP/1.1)을 서버가 이해하고 있음을 나타내는 HTTP 상태 코드입니다. 두 번째 라인인 Content-Type: text/html은 클라이언트에 보내는 컨텐츠 타입을 나타냅니다.

---

클라이언트가 요청한 경로를 서버가 찾을 수 없는 경우, 다음과 같은 헤더로 응답합니다.

{% highlight shell %}
HTTP/1.1 404 NOT FOUND
{% endhighlight %}

이 경우 서버는 HTTP 프로토콜을 이해했지만, 요청된 콘텐츠를 찾을 수 없음을 나타내고 있습니다. 콘텐츠가 이동했거나 URL 경로를 잘못 입력했거나 페이지가 제거된 경우 이 문제가 발생할 수 있습니다. 

## What is HTTPS?

HTTP 리퀘스트는 특정 네트워크 포인트를 통해 누구나 접근하고, 읽을 수 있습니다. 때문에 이 프로토콜을 사용해 신용카드 정보나 암호를 전달하는 것은 좋지 않습니다. HTTPS는 HTTP Secure의 줄임말로, 네트워크를 통해 보내고 받는 데이터를 암호화해 보안을 유지합니다. 이에 대해서는 다음에 다뤄보도록 하겠습니다.


[참고 링크](https://developer.mozilla.org/en-US/docs/Web/HTTP)